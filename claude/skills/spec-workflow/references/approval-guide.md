---
type: reference
description: 审批操作手册 - 统一规范所有阶段的审批流程和有效用语
version: 2.0.0
updated: 2025-11-27
---

# 审批操作手册

本手册适用于 **所有阶段（0/1/2/3/4）** 的审批操作，各阶段文档通过引用本手册避免内容重复。

---

## 🎯 审批核心原则

1. **统一规则**：所有阶段都需要人工审批
2. **质量把关**：验证通过后，必须审批才能进入下一阶段
3. **避免返工**：审批确保交付物质量，防止"先做后补"
4. **明确表达**：必须使用有效审批用语，禁止模糊表达

---

## ✅ 审批执行流程（标准话术）

### 第 1 步：验证通过后立即停止

验证脚本通过后，立即停止并提示用户审批：

```
✅ 阶段N验证通过！

审批当前阶段的交付物：
- 📄 {文档名称}：{文档路径}

请输入审批意见（有效审批用语：审批通过、确认无误、同意、批准、可以、没问题）
```

### 第 2 步：等待用户输入

⏸️ **必须等待**用户在对话框输入审批意见，禁止自动继续。

### 第 3 步：检查审批用语有效性

收到用户输入后，先判断是否为有效审批用语：

| 用户输入示例 | 是否有效 | 处理方式         |
| ------------ | -------- | ---------------- |
| "审批通过"   | ✅ 有效  | 执行审批命令     |
| "确认无误"   | ✅ 有效  | 执行审批命令     |
| "同意"       | ✅ 有效  | 执行审批命令     |
| "好的"       | ❌ 无效  | 提示用户重新输入 |
| "继续"       | ❌ 无效  | 提示用户重新输入 |
| "OK"         | ❌ 无效  | 提示用户重新输入 |

**无效用语提示话术**：

```
输入的"{用户输入}"不是有效的审批用语。

请使用以下任一审批用语明确表达：
✅ 审批通过、确认无误、同意、批准、可以、没问题

或如需修改，请告知具体调整内容。
```

### 第 4 步：执行审批命令

用户输入有效审批用语后，执行：

```bash
python3 scripts/phase_gateway.py --approve-phase N --approval "<当前对话用户回复的审批原文>" --approver "<当前对话的用户名称>"
```

**⚠️ 关键规则（必须严格遵守）**：

- ✅ **必须使用用户在当前对话轮次中刚刚回复的原文**（逐字复制，不得修改）
- ✅ **禁止使用之前对话中的审批意见**（即使是同一用户）
- ✅ **禁止使用固定值**（如 `--approval "审批通过"`，即使用户说的是"审批通过"也要从当前消息中提取）
- ✅ `--approver` 使用当前对话的用户名称
- ❌ **禁止自动重试失败命令**

**示例对比**：

| 场景   | 用户当前回复           | ❌ 错误命令                        | ✅ 正确命令                            |
| ------ | ---------------------- | ---------------------------------- | -------------------------------------- |
| 场景 1 | "确认无误"             | `--approval "审批通过"`            | `--approval "确认无误"`                |
| 场景 2 | "同意，可以开始下一步" | `--approval "审批通过"`            | `--approval "同意，可以开始下一步"`    |
| 场景 3 | "没问题"               | `--approval "审批通过"`            | `--approval "没问题"`                  |
| 场景 4 | "审批通过"             | 使用固定值 `--approval "审批通过"` | 从当前消息提取 `--approval "审批通过"` |

**⚠️ 特别说明（场景 4）**：

- 即使用户说的是"审批通过"，也**不能直接写固定值字符串**
- 必须**从当前对话消息中提取**用户的原文
- 这样可以确保传递的是**当前轮次的真实回复**，而不是历史记录或模板文本

---

## 📋 有效/无效审批用语清单

### ✅ 有效审批用语（任选其一）

| 用语     | 含义     | 示例场景     |
| -------- | -------- | ------------ |
| 审批通过 | 正式批准 | 正式审批流程 |
| 确认无误 | 确认质量 | 强调验证结果 |
| 同意     | 表示同意 | 简洁表达     |
| 批准     | 正式批准 | 正式审批流程 |
| 可以     | 允许执行 | 口语化表达   |
| 没问题   | 无异议   | 口语化表达   |

**组合表达**（也有效）：

- "确认无误，审批通过"
- "同意，可以进入下一阶段"
- "没问题，批准"

### ❌ 无效审批用语（不可使用）

| 用语类型 | 示例             | 原因           |
| -------- | ---------------- | -------------- |
| 模糊表达 | 好的、OK、嗯、行 | 不明确是否同意 |
| 继续类   | 继续、下一步、go | 未明确审批意见 |
| 英文缩写 | LGTM、Approved   | 规范要求中文   |
| 单字符   | ✓、√、+1         | 不是有效语句   |

---

## 审批失败处理

📖 **错误处理详情**：参见[脚本命令参考 - 错误处理](scripts-reference.md#错误处理)

---

## 🚫 禁止行为清单

| 禁止行为     | 说明                       | 正确做法               |
| ------------ | -------------------------- | ---------------------- |
| 自动通过审批 | 验证通过后直接进入下一阶段 | 必须等待用户审批       |
| 使用固定值   | `--approval "审批通过"`    | 使用用户实际输入       |
| 接受模糊用语 | 用户说"好的"/"继续"就执行  | 提示用户重新输入       |
| 跳过审批     | 直接修改状态文件           | 必须通过审批命令       |
| 自动重试失败 | 审批失败后自动再次执行     | 分析原因后等待用户指示 |

---

## 审批状态检查

📖 **检查命令和输出格式**：参见[脚本命令参考 - 审批状态检查](scripts-reference.md#审批状态检查)

**使用场景**：恢复中断的工作流、确认前置阶段审批、调试审批问题

---

## 📝 各阶段审批时机

| 阶段   | 审批前提                         | 审批对象                        | 下一步        |
| ------ | -------------------------------- | ------------------------------- | ------------- |
| 阶段 0 | wiki 验证通过                    | preparation.md                  | 进入阶段 1    |
| 阶段 1 | 设计验证通过                     | design.md                       | 进入阶段 2    |
| 阶段 2 | 计划验证通过                     | tasks.md                        | 进入阶段 3    |
| 阶段 3 | 执行质量检查通过 + wiki 更新完成 | execution_summary.md + iwiki.md | 🎉 工作流完成 |

---

## 🔗 相关文档

- [验证操作手册](./scripts-reference.md) - 验证脚本使用规范
- [脚本命令参考](./scripts-reference.md) - 所有脚本命令详解
- [skill.md](../skill.md) - AI执行指南
- [阶段0-3文档](./phases/) - 各阶段详细步骤
